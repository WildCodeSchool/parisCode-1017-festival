{% extends "base.html.twig" %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.0/fullcalendar.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.0/fullcalendar.print.css" media="print">
    <link rel="stylesheet" href="{{ asset('css/calendar.css') }}">
    <link rel="stylesheet" href="{{ asset('css/stylediscover.css') }}">
{% endblock %}

{% block body %}

        <div class="row center-align">
            <div class="col s12">
                <h2>My profile</h2>
                <h3>Hi {{ user.username }}!</h3>
            </div>
        </div>
        <div class="card">
            {#<div class="card-content">#}
            {#</div>#}
            <div class="card-tabs">
                <ul class="tabs tabs-fixed-width">
                    <li class="tab"><a class="active" href="#mycalendar">My calendar</a></li>
                    {#<li class="tab"><a href="#mywishlist">My wishlist</a></li>#}
                    <li class="tab"><a href="#myinfos">My infos</a></li>
                </ul>
            </div>
            <div class="card-content">
                <div id="mycalendar">
                    <div id='calendar' class="container"></div>
                </div>
                {#<div id="mywishlist">#}
                    {#<!-- Materialize Collections - Wishlists -->#}
                    {#<div class="row">#}
                        {#<div class="col s12 m4">#}
                            {#<ul class="collection with-header">#}
                                {#<li class="collection-header"><h4>Genres</h4></li>#}
                                {#{% if user.wishlist.genre is defined %}#}
                                    {#{% for genre in user.wishlist.genre %}#}
                                        {#<li class="collection-item">#}
                                            {#<div>#}
                                                {#{{ genre.name }}#}
                                                {#<!-- Add/remove to/from wishlist -->#}
                                                {#{% if genre in user.wishlist.genre %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_genre', { 'user_id': 1, 'id': 1, 'genre_id': genre.id }) }}"><i class="material-icons">favorite</i></a>#}
                                                {#{% else %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_genre', { 'user_id': 1, 'id': 1, 'genre_id': genre.id }) }}"><i class="material-icons">favorite_border</i></a>#}
                                                {#{% endif %}#}
                                            {#</div>#}
                                        {#</li>#}
                                    {#{% endfor %}#}
                                {#{% endif %}#}
                                {#Tous les genres#}
                                {#{% for genre in genres %}#}
                                {#<li class="collection-item"><div>{{ genre.name }}<a href="#" class="secondary-content"><i class="material-icons">grade</i></a></div></li>#}
                                {#{% endfor %}#}
                            {#</ul>#}
                        {#</div>#}
                        {#<div class="col s12 m4">#}
                            {#<ul class="collection with-header">#}
                                {#<li class="collection-header"><h4>Artists</h4></li>#}
                                {#{% if user.wishlist.artist is defined%}#}
                                    {#{% for artist in user.wishlist.artist %}#}
                                        {#<li class="collection-item">#}
                                            {#<div>#}
                                                {#{{ artist.name }}#}
                                                {#<!-- Add/remove to/from wishlist -->#}
                                                {#{% if artist in user.wishlist.artist %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_artist', { 'user_id': 1, 'id': 1, 'artist_id': artist.id }) }}"><i class="material-icons">favorite</i></a>#}
                                                {#{% else %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_artist', { 'user_id': 1, 'id': 1, 'artist_id': artist.id }) }}"><i class="material-icons">favorite_border</i></a>#}
                                                {#{% endif %}#}
                                            {#</div>#}
                                        {#</li>#}
                                    {#{% endfor %}#}
                                {#{% endif %}#}
                                {#Tous les artistes#}
                                {#{% for artist in artists %}#}
                                {#<li class="collection-item"><div>{{ artist.name }}<a href="#" class="secondary-content"><i class="material-icons">grade</i></a></div></li>#}
                                {#{% endfor %}#}
                            {#</ul>#}
                        {#</div>#}
                        {#<div class="col s12 m4">#}
                            {#<ul class="collection with-header">#}
                                {#<li class="collection-header"><h4>Locations</h4></li>#}
                                {#{% if user.wishlist.location is defined %}#}
                                    {#{% for location in user.wishlist.location %}#}
                                        {#<li class="collection-item">#}
                                            {#<div>#}
                                                {#{{ location.name }}#}
                                                {#<!-- Add/remove to/from wishlist -->#}
                                                {#{% if location in user.wishlist.location %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_location', { 'user_id': 1, 'id': 1, 'location_id': location.id }) }}"><i class="material-icons">favorite</i></a>#}
                                                {#{% else %}#}
                                                    {#<a class="secondary-content" href="{{ path('wishlist_location', { 'user_id': 1, 'id': 1, 'location_id': location.id }) }}"><i class="material-icons">favorite_border</i></a>#}
                                                {#{% endif %}#}
                                            {#</div>#}
                                        {#</li>#}
                                    {#{% endfor %}#}
                                {#{% endif %}#}
                                {#Toutes les locations#}
                                {#{% for location in locations %}#}
                                {#<li class="collection-item"><div>{{ location.name }}<a href="#" class="secondary-content"><i class="material-icons">grade</i></a></div></li>#}
                                {#{% endfor %}#}
                            {#</ul>#}
                        {#</div>#}
                    {#</div>#}
                {#</div>#}
                <div id="myinfos">
                    <h1>User</h1>
                    <div id="profile-page-sidebar" class="col s12">
                        <ul id="profile-page-about-details" class="collection z-depth-1">
                            <li class="collection-item">
                                <div class="row">
                                    <div class="col s5 grey-text darken-1 left-align"><i
                                                class="mdi-action-wallet-travel"></i> Username
                                    </div>
                                    <div class="col s7 grey-text text-darken-4 right-align">{{ user.username }}</div>
                                </div>
                            </li>
                            <li class="collection-item">
                                <div class="row">
                                    <div class="col s5 grey-text darken-1 left-align"><i
                                                class="mdi-social-domain"></i> Email
                                    </div>
                                    <div class="col s7 grey-text text-darken-4 right-align">{{ user.email }}</div>
                                </div>
                            </li>
                            <li class="collection-item">
                            <div class="row">
                                <div class="col s5 grey-text darken-1 left-align"><i
                                            class="mdi-social-domain"></i> Location
                                </div>
                                <div class="col s7 grey-text text-darken-4 right-align">{% if user.location %}{{ user.location.name }}{% endif %}</div>
                            </div>
                            </li>
                        </ul>
                    </div>
                    <p class="center-align">
                        <a href="{{ path('fos_user_profile_edit') }}" class="btn-floating red"><i class="material-icons">edit</i></a>
                    </p>
                </div>
            </div>
        </div>

    <!-- .container -->

{% endblock %}

{% block javascripts %}

    {#<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.0/fullcalendar.min.js"></script>

    <script>
        $(document).ready(function() {

            // page is now ready, initialize the calendar...

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'listDay,listWeek,month'
                },

                // customize the button names,
                // otherwise they'd all just say "list"
                views: {
                    listDay: { buttonText: 'list day' },
                    listWeek: { buttonText: 'list week' }
                },

                navLinks: true, // can click day/week names to navigate views
                /*editable: true,*/
                displayEventTime: true,
                eventLimit: true, // allow "more" link when too many events
                events: "{{ path('api_calendar') }}",

                // Florian comments : custom div calendar render
                // https://github.com/WildCodeSchool/laloupe-0915-partnet
//                eventRender: function(event, element) {
//                    element.each(function() {
//                        element.append('<strong>' + event.title + ' ' + new Date(event.start) + '</strong>');
//                    })
//                }
            })
        });
    </script>

{% endblock %}